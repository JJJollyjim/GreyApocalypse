define("evaluator/env",{environment:{program1:{sourceString:"",ast:[],instructionPointer:0,x:0,y:0,finished:!1,loopStack:[]},program2:{sourceString:"",ast:[],instructionPointer:0,x:5,y:5,finished:!1,loopStack:[]},stepCount:0,maxStepCount:2500,sum:0,gameState:[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]]}}),parser=function(){function e(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var t={parse:function(t,n){function a(e,t,n){var r=e,i=n-e.length;for(var s=0;s<i;s++)r=t+r;return r}function f(e){var t=e.charCodeAt(0),n,r;return t<=255?(n="x",r=2):(n="u",r=4),"\\"+n+a(t.toString(16).toUpperCase(),"0",r)}function l(e){if(i<o)return;i>o&&(o=i,u=[]),u.push(e)}function c(){var e,t,n;n=i,e=[],t=h();while(t!==null)e.push(t),t=h();return e!==null&&(e=function(e,t){return window.flatten=function(e){return e.reduce(function t(e,n){return Array.isArray(n)?n.reduce(t,e):e.push(n),e},[])},flatten(t)}(n,e)),e===null&&(i=n),e}function h(){var e;return e=p(),e===null&&(e=y(),e===null&&(e=b(),e===null&&(e=w(),e===null&&(e=E())))),e}function p(){var e;return e=d(),e===null&&(e=v(),e===null&&(e=m(),e===null&&(e=g()))),e}function d(){var e,n,r,o,u;return o=i,u=i,e=A(),e!==null?(t.charCodeAt(i)===62?(n=">",i++):(n=null,s===0&&l('">"')),n!==null?(r=A(),r!==null?e=[e,n,r]:(e=null,i=u)):(e=null,i=u)):(e=null,i=u),e!==null&&(e=function(e){return{tag:"moveright"}}(o)),e===null&&(i=o),e}function v(){var e,n,r,o,u;return o=i,u=i,e=A(),e!==null?(t.charCodeAt(i)===60?(n="<",i++):(n=null,s===0&&l('"<"')),n!==null?(r=A(),r!==null?e=[e,n,r]:(e=null,i=u)):(e=null,i=u)):(e=null,i=u),e!==null&&(e=function(e){return{tag:"moveleft"}}(o)),e===null&&(i=o),e}function m(){var e,n,r,o,u;return o=i,u=i,e=A(),e!==null?(t.charCodeAt(i)===118?(n="v",i++):(n=null,s===0&&l('"v"')),n===null&&(t.charCodeAt(i)===86?(n="V",i++):(n=null,s===0&&l('"V"'))),n!==null?(r=A(),r!==null?e=[e,n,r]:(e=null,i=u)):(e=null,i=u)):(e=null,i=u),e!==null&&(e=function(e){return{tag:"movedown"}}(o)),e===null&&(i=o),e}function g(){var e,n,r,o,u;return o=i,u=i,e=A(),e!==null?(t.charCodeAt(i)===94?(n="^",i++):(n=null,s===0&&l('"^"')),n!==null?(r=A(),r!==null?e=[e,n,r]:(e=null,i=u)):(e=null,i=u)):(e=null,i=u),e!==null&&(e=function(e){return{tag:"moveup"}}(o)),e===null&&(i=o),e}function y(){var e,n,r,o,u;return o=i,u=i,e=A(),e!==null?(t.charCodeAt(i)===43?(n="+",i++):(n=null,s===0&&l('"+"')),n!==null?(r=A(),r!==null?e=[e,n,r]:(e=null,i=u)):(e=null,i=u)):(e=null,i=u),e!==null&&(e=function(e){return{tag:"increase"}}(o)),e===null&&(i=o),e}function b(){var e,n,r,o,u;return o=i,u=i,e=A(),e!==null?(t.charCodeAt(i)===61?(n="=",i++):(n=null,s===0&&l('"="')),n!==null?(r=A(),r!==null?e=[e,n,r]:(e=null,i=u)):(e=null,i=u)):(e=null,i=u),e!==null&&(e=function(e){return{tag:"setToAverage"}}(o)),e===null&&(i=o),e}function w(){var e,n,r,o,u;return o=i,u=i,e=A(),e!==null?(t.charCodeAt(i)===46?(n=".",i++):(n=null,s===0&&l('"."')),n!==null?(r=A(),r!==null?e=[e,n,r]:(e=null,i=u)):(e=null,i=u)):(e=null,i=u),e!==null&&(e=function(e){return{tag:"sleep"}}(o)),e===null&&(i=o),e}function E(){var e;return e=S(),e===null&&(e=x(),e===null&&(e=T(),e===null&&(e=N()))),e}function S(){var e,n,r,o,u,a,f,h,p,d,v,m,g,y,b,w,E;return w=i,E=i,e=A(),e!==null?(t.substr(i,2)==="if"?(n="if",i+=2):(n=null,s===0&&l('"if"')),n!==null?(r=A(),r!==null?(t.charCodeAt(i)===40?(o="(",i++):(o=null,s===0&&l('"("')),o!==null?(u=A(),u!==null?(a=C(),a!==null?(f=A(),f!==null?(t.charCodeAt(i)===41?(h=")",i++):(h=null,s===0&&l('")"')),h!==null?(p=A(),p!==null?(t.charCodeAt(i)===123?(d="{",i++):(d=null,s===0&&l('"{"')),d!==null?(v=A(),v!==null?(m=c(),m!==null?(g=A(),g!==null?(t.charCodeAt(i)===125?(y="}",i++):(y=null,s===0&&l('"}"')),y!==null?(b=A(),b!==null?e=[e,n,r,o,u,a,f,h,p,d,v,m,g,y,b]:(e=null,i=E)):(e=null,i=E)):(e=null,i=E)):(e=null,i=E)):(e=null,i=E)):(e=null,i=E)):(e=null,i=E)):(e=null,i=E)):(e=null,i=E)):(e=null,i=E)):(e=null,i=E)):(e=null,i=E)):(e=null,i=E)):(e=null,i=E)):(e=null,i=E),e!==null&&(e=function(e,t,n){return[{tag:"if",condition:t,endIndexDelta:n.length+1},n,{tag:"endif",condition:t,startIndexDelta:-n.length-1}]}(w,e[5],e[11])),e===null&&(i=w),e}function x(){var e,n,r,o,u,a,f,h,p,d,v,m,g,y,b,w;return b=i,w=i,e=A(),e!==null?(t.substr(i,5)==="while"?(n="while",i+=5):(n=null,s===0&&l('"while"')),n!==null?(r=A(),r!==null?(t.charCodeAt(i)===40?(o="(",i++):(o=null,s===0&&l('"("')),o!==null?(u=A(),u!==null?(a=C(),a!==null?(f=A(),f!==null?(t.charCodeAt(i)===41?(h=")",i++):(h=null,s===0&&l('")"')),h!==null?(p=A(),p!==null?(t.charCodeAt(i)===123?(d="{",i++):(d=null,s===0&&l('"{"')),d!==null?(v=c(),v!==null?(m=A(),m!==null?(t.charCodeAt(i)===125?(g="}",i++):(g=null,s===0&&l('"}"')),g!==null?(y=A(),y!==null?e=[e,n,r,o,u,a,f,h,p,d,v,m,g,y]:(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w),e!==null&&(e=function(e,t,n){return[{tag:"while",condition:t,endIndexDelta:n.length+1},n,{tag:"endwhile",condition:t,startIndexDelta:-n.length-1}]}(b,e[5],e[10])),e===null&&(i=b),e}function T(){var e,n,r,o,u,a,f,h,p,d,v;return d=i,v=i,e=A(),e!==null?(t.substr(i,8)==="infinite"?(n="infinite",i+=8):(n=null,s===0&&l('"infinite"')),n!==null?(r=A(),r!==null?(t.charCodeAt(i)===123?(o="{",i++):(o=null,s===0&&l('"{"')),o!==null?(u=A(),u!==null?(a=c(),a!==null?(f=A(),f!==null?(t.charCodeAt(i)===125?(h="}",i++):(h=null,s===0&&l('"}"')),h!==null?(p=A(),p!==null?e=[e,n,r,o,u,a,f,h,p]:(e=null,i=v)):(e=null,i=v)):(e=null,i=v)):(e=null,i=v)):(e=null,i=v)):(e=null,i=v)):(e=null,i=v)):(e=null,i=v)):(e=null,i=v),e!==null&&(e=function(e,t){var t=window.flatten(t);return[{tag:"infiniteloop",endIndexDelta:t.length+1},t,{tag:"endinfiniteloop",startIndexDelta:-t.length-1}]}(d,e[5])),e===null&&(i=d),e}function N(){var e,n,r,o,u,a,f,h,p,d,v,m,g,y,b,w;return b=i,w=i,e=A(),e!==null?(t.substr(i,6)==="repeat"?(n="repeat",i+=6):(n=null,s===0&&l('"repeat"')),n!==null?(r=A(),r!==null?(t.charCodeAt(i)===40?(o="(",i++):(o=null,s===0&&l('"("')),o!==null?(u=A(),u!==null?(a=L(),a!==null?(f=A(),f!==null?(t.charCodeAt(i)===41?(h=")",i++):(h=null,s===0&&l('")"')),h!==null?(p=A(),p!==null?(t.charCodeAt(i)===123?(d="{",i++):(d=null,s===0&&l('"{"')),d!==null?(v=c(),v!==null?(m=A(),m!==null?(t.charCodeAt(i)===125?(g="}",i++):(g=null,s===0&&l('"}"')),g!==null?(y=A(),y!==null?e=[e,n,r,o,u,a,f,h,p,d,v,m,g,y]:(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w)):(e=null,i=w),e!==null&&(e=function(e,t,n){var n=window.flatten(n);return[{tag:"repeatloop",iterationCount:t,currentIteration:0,endIndexDelta:n.length+1},n,{tag:"endrepeatloop",iterationCount:t,startIndexDelta:-n.length-1}]}(b,e[5],e[10])),e===null&&(i=b),e}function C(){var e,t,n,r,s,o,u;return o=i,u=i,e=A(),e!==null?(t=k(),t!==null?(n=A(),n!==null?(r=L(),r!==null?(s=A(),s!==null?e=[e,t,n,r,s]:(e=null,i=u)):(e=null,i=u)):(e=null,i=u)):(e=null,i=u)):(e=null,i=u),e!==null&&(e=function(e,t,n){return{tag:"comparison",comparator:t,number:n}}(o,e[1],e[3])),e===null&&(i=o),e}function k(){var e;return t.charCodeAt(i)===62?(e=">",i++):(e=null,s===0&&l('">"')),e===null&&(t.charCodeAt(i)===60?(e="<",i++):(e=null,s===0&&l('"<"'))),e}function L(){var e,n,r,o,u;o=i,u=i,t.charCodeAt(i)===45?(e="-",i++):(e=null,s===0&&l('"-"')),e=e!==null?e:"";if(e!==null){/^[0-9]/.test(t.charAt(i))?(r=t.charAt(i),i++):(r=null,s===0&&l("[0-9]"));if(r!==null){n=[];while(r!==null)n.push(r),/^[0-9]/.test(t.charAt(i))?(r=t.charAt(i),i++):(r=null,s===0&&l("[0-9]"))}else n=null;n!==null?e=[e,n]:(e=null,i=u)}else e=null,i=u;return e!==null&&(e=function(e,t,n){return parseInt(t+n.join(""))}(o,e[0],e[1])),e===null&&(i=o),e}function A(){var e,t;e=[],t=O(),t===null&&(t=_());while(t!==null)e.push(t),t=O(),t===null&&(t=_());return e===null&&(e=""),e}function O(){var e,n,r,o;s++,o=i,t.charCodeAt(i)===35?(e="#",i++):(e=null,s===0&&l('"#"'));if(e!==null){n=[],/^[^\n]/.test(t.charAt(i))?(r=t.charAt(i),i++):(r=null,s===0&&l("[^\\n]"));while(r!==null)n.push(r),/^[^\n]/.test(t.charAt(i))?(r=t.charAt(i),i++):(r=null,s===0&&l("[^\\n]"));n!==null?(t.charCodeAt(i)===10?(r="\n",i++):(r=null,s===0&&l('"\\n"')),r===null&&(r=M()),r!==null?e=[e,n,r]:(e=null,i=o)):(e=null,i=o)}else e=null,i=o;return s--,s===0&&e===null&&l("comment"),e}function M(){var e,n;return n=i,s++,t.length>i?(e=t.charAt(i),i++):(e=null,s===0&&l("any character")),s--,e===null?e="":(e=null,i=n),e}function _(){var e;return s++,t.charCodeAt(i)===32?(e=" ",i++):(e=null,s===0&&l('" "')),e===null&&(t.charCodeAt(i)===10?(e="\n",i++):(e=null,s===0&&l('"\\n"')),e===null&&(t.charCodeAt(i)===9?(e="	",i++):(e=null,s===0&&l('"\\t"')))),s--,s===0&&e===null&&l("whitespace"),e}function D(e){e.sort();var t=null,n=[];for(var r=0;r<e.length;r++)e[r]!==t&&(n.push(e[r]),t=e[r]);return n}function P(){var e=1,n=1,r=!1;for(var s=0;s<Math.max(i,o);s++){var u=t.charAt(s);u==="\n"?(r||e++,n=1,r=!1):u==="\r"||u==="\u2028"||u==="\u2029"?(e++,n=1,r=!0):(n++,r=!1)}return{line:e,column:n}}var r={sequence:c,command:h,movementCommand:p,moveRightCommand:d,moveLeftCommand:v,moveUpCommand:m,moveDownCommand:g,increaseCommand:y,setToAverageCommand:b,sleepCommand:w,controlExpression:E,ifStatement:S,whileLoop:x,infiniteLoop:T,repeatLoop:N,comparison:C,comparator:k,number:L,_:A,comment:O,EOF:M,whitespace:_};if(n!==undefined){if(r[n]===undefined)throw new Error("Invalid rule name: "+e(n)+".")}else n="sequence";var i=0,s=0,o=0,u=[],H=r[n]();if(H===null||i!==t.length){var B=Math.max(i,o),j=B<t.length?t.charAt(B):null,F=P();throw new this.SyntaxError(D(u),j,B,F.line,F.column)}return H},toSource:function(){return this._source}};return t.SyntaxError=function(t,n,r,i,s){function o(t,n){var r,i;switch(t.length){case 0:r="end of input";break;case 1:r=t[0];break;default:r=t.slice(0,t.length-1).join(", ")+" or "+t[t.length-1]}return i=n?e(n):"end of input","Expected "+r+" but "+i+" found."}this.name="SyntaxError",this.expected=t,this.found=n,this.message=o(t,n),this.offset=r,this.line=i,this.column=s},t.SyntaxError.prototype=Error.prototype,t}(),define("pegjs",function(e){return function(){var t,n;return t||e.parser}}(this)),define("parser/parser",["pegjs"],function(e){return function(t){return e.parse(t)}}),define("evaluator/initialiseEnvironment",["evaluator/env","parser/parser"],function(e,t){return function(n,r){e.environment={program1:{sourceString:"",ast:[],instructionPointer:0,x:0,y:0,finished:!1,loopStack:[]},program2:{sourceString:"",ast:[],instructionPointer:0,x:5,y:5,finished:!1,loopStack:[]},stepCount:0,maxStepCount:2500,sum:0,gameState:[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]]},e.environment.program1.sourceString=n,e.environment.program2.sourceString=r,e.environment.program1.ast=t(n),e.environment.program2.ast=t(r)}}),require.config({baseUrl:"scripts",paths:{jquery:"lib/jquery-1.10.2.min",pegjs:"parser/pegjs"},shim:{pegjs:{exports:"parser"}}}),require(["evaluator/initialiseEnvironment","evaluator/env"],function(e,t){console.log(t),e("++",">+ while (< -4) { >= }"),console.log(t)}),define("main",function(){});